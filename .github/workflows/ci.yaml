name: specs-workflow

on:
    pull_request:
        branches:
        - '*'
    push:
        branches:
        - master
        - main
    workflow_dispatch:

jobs:

    specs:
        strategy:
          matrix:
             os:
             - actuated-4cpu-4gb
             - actuated-arm64-4cpu-4gb

             # - ["actuated-arm64-4cpu-4gb","actuated-m1"]

        name: specs-${{ matrix.os }}
        runs-on: ${{ matrix.os }}
        steps:
        - run: |
            echo "TARGET_ARCH=$(uname -m)" >> $GITHUB_ENV
        - run: |
            echo ${{TARGET_ARCH}}

        - uses: actions/checkout@v1
        - name: Show runner arch
          run: |
            echo Runner arch: ${{runner.arch}}
        - name: Setup mirror
          uses: self-actuated/hub-mirror@master
        - name: Check specs
          run: |
            ./specs.sh
        - name: Look for BFP
          run: |
            find /lib/modules/5.10.77/kernel -name *bpf*

